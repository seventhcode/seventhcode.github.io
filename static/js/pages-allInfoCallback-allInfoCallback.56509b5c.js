(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-allInfoCallback-allInfoCallback"],{"5c79":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".hideCanvasView[data-v-017b1129]{position:relative}.hideCanvas[data-v-017b1129]{position:fixed;top:%?-99999?%;left:%?-99999?%;z-index:-99999}.flex_row_c_c[data-v-017b1129]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.modalView[data-v-017b1129]{width:100%;height:100%;position:fixed;top:0;left:0;right:0;bottom:0;opacity:0;outline:0;-webkit-transform:scale(1.2);transform:scale(1.2);-webkit-perspective:%?2500?%;perspective:%?2500?%;background:rgba(0,0,0,.6);-webkit-transition:all .3s ease-in-out;transition:all .3s ease-in-out;pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:999}.modalView.show[data-v-017b1129]{opacity:1;-webkit-transform:scale(1);transform:scale(1);pointer-events:auto}.flex_column[data-v-017b1129]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.backgroundColor-white[data-v-017b1129]{background-color:#fff}.border_radius_10px[data-v-017b1129]{border-radius:10px}.padding1vh[data-v-017b1129]{padding:1vh}.posterImage[data-v-017b1129]{width:60vw}.flex_row[data-v-017b1129]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}.marginTop2vh[data-v-017b1129]{margin-top:2vh}",""]),t.exports=e},"987a":function(t,e,i){"use strict";i.r(e);var a=i("eef2"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},"99f5":function(t,e,i){"use strict";var a,n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticStyle:{"font-size":"29rpx",color:"#999"}},[t._v("allInfoCallback为drawArray有序序列专属 \\n\n\t\t可以获取该有序序列内所有元素的信息 \\n\n\t\t可以用serialNum控制顺序，serialNum越小越先执行 \\n\n\t\tallInfoCallback可以return一个对象或Promise对象(最终resolve一个对象)用以更新覆盖原属性")]),i("v-uni-button",{attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.shareFc()}}},[t._v("生成海报")]),i("v-uni-view",{staticClass:"flex_row_c_c modalView",class:t.qrShow?"show":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideQr()}}},[i("v-uni-view",{staticClass:"flex_column"},[i("v-uni-view",{staticClass:"backgroundColor-white padding1vh border_radius_10px"},[i("v-uni-image",{staticClass:"posterImage",attrs:{src:t.poster.finalPath||"",mode:"widthFix"}})],1),i("v-uni-view",{staticClass:"flex_row marginTop2vh"},[i("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){e.preventDefault(),e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.saveImage()}}},[t._v("保存图片")]),i("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){e.preventDefault(),e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.share()}}},[t._v("分享图片")])],1)],1)],1),i("v-uni-view",{staticClass:"hideCanvasView"},[i("v-uni-canvas",{staticClass:"hideCanvas",style:{width:(t.poster.width||10)+"px",height:(t.poster.height||10)+"px"},attrs:{"canvas-id":"default_PosterCanvasId"}})],1)],1)},o=[];i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}))},c704:function(t,e,i){"use strict";var a=i("e32b"),n=i.n(a);n.a},e32b:function(t,e,i){var a=i("5c79");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("6e96ed75",a,!0,{sourceMap:!1,shadowMode:!1})},eef2:function(t,e,i){"use strict";var a=i("ee27");i("7db0"),i("d3b7"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var n=a(i("c964")),o=a(i("bfd4")),r=i("c410"),l={data:function(){return{poster:{},qrShow:!1,canvasId:"default_PosterCanvasId"}},methods:{shareFc:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,o.default.log("准备生成:"+new Date),e.next=4,(0,r.getSharePoster)({_this:t,type:"testShareType",formData:{},posterCanvasId:t.canvasId,delayTimeScale:20,drawArray:function(t){var e=t.bgObj,i=(t.type,t.bgScale,.3*e.width),a=.045*e.width,n=.04*e.height;return new Promise((function(t,r){t([{type:"custom",setDraw:function(t){t.setFillStyle("black"),t.setGlobalAlpha(.3),t.fillRect(0,e.height-.2*e.height,e.width,.2*e.height),t.setGlobalAlpha(1)}},{type:"image",url:"/static/3.jpg",alpha:.3,dx:i,dy:e.height-.25*e.width,infoCallBack:function(t){var i=.2*e.width/t.height;return{circleSet:{x:t.width*i/2,y:.2*e.width/2,r:.2*e.width/2},dWidth:t.width*i,dHeight:.2*e.width}}},{type:"text",fontStyle:"italic",text:"取舍",size:a,color:"white",alpha:.5,textAlign:"left",textBaseline:"middle",infoCallBack:function(t){return o.default.log("index页面的text的infocallback ，textlength:"+t),{dx:e.width-t-a,dy:e.height-3*n}},serialNum:0,id:"tag1"},{type:"text",text:"取舍",fontWeight:"bold",size:a,color:"white",alpha:.75,textAlign:"left",textBaseline:"middle",serialNum:1,allInfoCallback:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.drawArray,i=e.find((function(t){return"tag1"===t.id}));return new Promise((function(t,e){setTimeout((function(){t({dx:i.dx,dy:i.dy+n})}),1)}))}},{type:"text",text:"取舍",size:a,color:"white",alpha:1,textAlign:"left",textBaseline:"middle",infoCallBack:function(t){return{dx:e.width-t-a,dy:e.height-n}}},{type:"qrcode",text:"你好，我是取舍",size:.2*e.width,dx:.05*e.width,dy:e.height-.25*e.width}])}))},setCanvasWH:function(e){var i=e.bgObj;e.type,e.bgScale;t.poster=i}});case 4:i=e.sent,o.default.log("海报生成成功, 时间:"+new Date+"， 临时路径: "+i.poster.tempFilePath),t.poster.finalPath=i.poster.tempFilePath,t.qrShow=!0,e.next=15;break;case 10:e.prev=10,e.t0=e["catch"](0),o.default.hideLoading(),o.default.showToast(JSON.stringify(e.t0)),console.log(JSON.stringify(e.t0));case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))()},saveImage:function(){o.default.showToast("保存了")},share:function(){o.default.showToast("分享了")},hideQr:function(){this.qrShow=!1}}};e.default=l},f783:function(t,e,i){"use strict";i.r(e);var a=i("99f5"),n=i("987a");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("c704");var r,l=i("f0c5"),s=Object(l["a"])(n["default"],a["b"],a["c"],!1,null,"017b1129",null,!1,a["a"],r);e["default"]=s.exports}}]);