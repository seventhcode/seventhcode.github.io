(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-infoCallBack-infoCallBack"],{"0042":function(t,e,i){"use strict";i.r(e);var a=i("cea3"),n=i("3e2e");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("0a43");var r,c=i("f0c5"),s=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"3d5c21cc",null,!1,a["a"],r);e["default"]=s.exports},"0130":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".hideCanvasView[data-v-3d5c21cc]{position:relative}.hideCanvas[data-v-3d5c21cc]{position:fixed;top:%?-99999?%;left:%?-99999?%;z-index:-99999}.flex_row_c_c[data-v-3d5c21cc]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.modalView[data-v-3d5c21cc]{width:100%;height:100%;position:fixed;top:0;left:0;right:0;bottom:0;opacity:0;outline:0;-webkit-transform:scale(1.2);transform:scale(1.2);-webkit-perspective:%?2500?%;perspective:%?2500?%;background:rgba(0,0,0,.6);-webkit-transition:all .3s ease-in-out;transition:all .3s ease-in-out;pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:999}.modalView.show[data-v-3d5c21cc]{opacity:1;-webkit-transform:scale(1);transform:scale(1);pointer-events:auto}.flex_column[data-v-3d5c21cc]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.backgroundColor-white[data-v-3d5c21cc]{background-color:#fff}.border_radius_10px[data-v-3d5c21cc]{border-radius:10px}.padding1vh[data-v-3d5c21cc]{padding:1vh}.posterImage[data-v-3d5c21cc]{width:60vw}.flex_row[data-v-3d5c21cc]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}.marginTop2vh[data-v-3d5c21cc]{margin-top:2vh}",""]),t.exports=e},"0a43":function(t,e,i){"use strict";var a=i("fb2d"),n=i.n(a);n.a},"3e2e":function(t,e,i){"use strict";i.r(e);var a=i("fc85"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},cea3:function(t,e,i){"use strict";var a,n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticStyle:{"font-size":"29rpx",color:"#999"}},[t._v("目前image、text等类型 支持 infoCallBack\\n\n\t\tinfoCallBack是一个回调函数, 携带一个参数为自身的信息\\n\n\t\t例如image类型会返回自身的宽高, text类型会返回 自身的长度\\n\n\t\t该函数可以return一个对象用以更新覆盖原绘制属性")]),i("v-uni-button",{attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.shareFc()}}},[t._v("生成海报")]),i("v-uni-view",{staticClass:"flex_row_c_c modalView",class:t.qrShow?"show":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideQr()}}},[i("v-uni-view",{staticClass:"flex_column"},[i("v-uni-view",{staticClass:"backgroundColor-white padding1vh border_radius_10px"},[i("v-uni-image",{staticClass:"posterImage",attrs:{src:t.poster.finalPath||"",mode:"widthFix"}})],1),i("v-uni-view",{staticClass:"flex_row marginTop2vh"},[i("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){e.preventDefault(),e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.saveImage()}}},[t._v("保存图片")]),i("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){e.preventDefault(),e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.share()}}},[t._v("分享图片")])],1)],1)],1),i("v-uni-view",{staticClass:"hideCanvasView"},[i("v-uni-canvas",{staticClass:"hideCanvas",style:{width:(t.poster.width||10)+"px",height:(t.poster.height||10)+"px"},attrs:{"canvas-id":"default_PosterCanvasId"}})],1)],1)},o=[];i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}))},fb2d:function(t,e,i){var a=i("0130");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("f47ce15e",a,!0,{sourceMap:!1,shadowMode:!1})},fc85:function(t,e,i){"use strict";var a=i("ee27");i("d3b7"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var n=a(i("c964")),o=a(i("bfd4")),r=i("c410"),c={data:function(){return{poster:{},qrShow:!1,canvasId:"default_PosterCanvasId"}},methods:{shareFc:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,o.default.log("准备生成:"+new Date),e.next=4,(0,r.getSharePoster)({_this:t,type:"testShareType",formData:{},posterCanvasId:t.canvasId,delayTimeScale:20,drawArray:function(t){var e=t.bgObj,i=(t.type,t.bgScale,.3*e.width),a=.045*e.width,n=.04*e.height;return new Promise((function(t,r){t([{type:"image",url:"/static/3.jpg",alpha:.3,dx:i,dy:e.height-.25*e.width,infoCallBack:function(t){var i=.2*e.width/t.height;return{circleSet:{x:t.width*i/2,y:.2*e.width/2,r:.2*e.width/2},dWidth:t.width*i,dHeight:.2*e.width}}},{type:"text",fontStyle:"italic",text:"取舍",size:a,color:"white",alpha:.5,textAlign:"left",textBaseline:"middle",infoCallBack:function(t){return o.default.log("index页面的text的infocallback ，textlength:"+t),{dx:e.width-t-a,dy:e.height-3*n}},serialNum:0,id:"tag1"}])}))},setCanvasWH:function(e){var i=e.bgObj;e.type,e.bgScale;t.poster=i}});case 4:i=e.sent,o.default.log("海报生成成功, 时间:"+new Date+"， 临时路径: "+i.poster.tempFilePath),t.poster.finalPath=i.poster.tempFilePath,t.qrShow=!0,e.next=15;break;case 10:e.prev=10,e.t0=e["catch"](0),o.default.hideLoading(),o.default.showToast(JSON.stringify(e.t0)),console.log(JSON.stringify(e.t0));case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))()},saveImage:function(){o.default.showToast("保存了")},share:function(){o.default.showToast("分享了")},hideQr:function(){this.qrShow=!1}}};e.default=c}}]);