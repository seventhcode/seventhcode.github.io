(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-setBgObjAndGetBgObj-setBgObjAndGetBgObj"],{"0dfd":function(t,e,i){"use strict";i.r(e);var a=i("7056"),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);e["default"]=n.a},"28f3":function(t,e,i){"use strict";var a,n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticStyle:{"font-size":"29rpx",color:"#999"}},[t._v("drawArray为Function时, 携带参数对象新增方法setBgObj、getBgObj\\n\n\t\tsetBgObj为动态设置画布大小方法传参 { height: Number, width: Number }\\n\n\t\tgetBgObj方法返回最新的画布信息\\n")]),i("v-uni-button",{attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.shareFc()}}},[t._v("生成海报")]),i("v-uni-view",{staticClass:"flex_row_c_c modalView",class:t.qrShow?"show":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideQr()}}},[i("v-uni-view",{staticClass:"flex_column"},[i("v-uni-view",{staticClass:"backgroundColor-white padding1vh border_radius_10px"},[i("v-uni-image",{staticClass:"posterImage",attrs:{src:t.poster.finalPath||"",mode:"widthFix"}})],1),i("v-uni-view",{staticClass:"flex_row marginTop2vh"},[i("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){e.preventDefault(),e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.saveImage()}}},[t._v("保存图片")]),i("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){e.preventDefault(),e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.share()}}},[t._v("分享图片")])],1)],1)],1),i("v-uni-view",{staticClass:"hideCanvasView"},[i("v-uni-canvas",{staticClass:"hideCanvas",style:{width:(t.poster.width||10)+"px",height:(t.poster.height||10)+"px"},attrs:{"canvas-id":"default_PosterCanvasId"}})],1)],1)},r=[];i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return a}))},3941:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".hideCanvasView[data-v-29b86a76]{position:relative}.hideCanvas[data-v-29b86a76]{position:fixed;top:%?-99999?%;left:%?-99999?%;z-index:-99999}.flex_row_c_c[data-v-29b86a76]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.modalView[data-v-29b86a76]{width:100%;height:100%;position:fixed;top:0;left:0;right:0;bottom:0;opacity:0;outline:0;-webkit-transform:scale(1.2);transform:scale(1.2);-webkit-perspective:%?2500?%;perspective:%?2500?%;background:rgba(0,0,0,.6);-webkit-transition:all .3s ease-in-out;transition:all .3s ease-in-out;pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:999}.modalView.show[data-v-29b86a76]{opacity:1;-webkit-transform:scale(1);transform:scale(1);pointer-events:auto}.flex_column[data-v-29b86a76]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.backgroundColor-white[data-v-29b86a76]{background-color:#fff}.border_radius_10px[data-v-29b86a76]{border-radius:10px}.padding1vh[data-v-29b86a76]{padding:1vh}.posterImage[data-v-29b86a76]{width:60vw}.flex_row[data-v-29b86a76]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}.marginTop2vh[data-v-29b86a76]{margin-top:2vh}",""]),t.exports=e},"659e":function(t,e,i){"use strict";var a=i("c38d"),n=i.n(a);n.a},7056:function(t,e,i){"use strict";var a=i("ee27");i("7db0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var n=a(i("c964")),r=a(i("bfd4")),o=i("c410"),d={data:function(){return{poster:{},qrShow:!1,canvasId:"default_PosterCanvasId",count:0}},methods:{shareFc:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t,e.prev=1,t.count++,r.default.log("准备生成:"+new Date),e.next=6,(0,o.getSharePoster)({_this:i,type:"testShareType",formData:{},posterCanvasId:i.canvasId,delayTimeScale:20,background:{height:10,width:10},setCanvasWH:function(t){var e=t.bgObj;i.poster=e},drawArray:function(t){t.bgObj,t.type,t.bgScale;var e=t.setBgObj,a=t.getBgObj;return[{type:"image",id:"productImage",url:i.count%2===0?"/static/1.png":"/static/2.jpg",dx:0,dy:0,serialNum:0,infoCallBack:function(t){var i,a;t.width>t.height?(i=t.width>700?700:t.width,a=i/t.width*t.height):(a=t.height>700?700:t.height,i=a/t.height*t.width),i<500&&(i=500,a=i/t.width*t.height);var n=.3*a;return n<150&&(n=150),n>250&&(n=250),e({width:i,height:a+n}),{dWidth:i,dHeight:a}}},{type:"text",id:"productName",text:"取舍",color:"#000",serialNum:1,allInfoCallback:function(t){var e=t.drawArray,i=e.find((function(t){return"productImage"===t.id})),n=a().height-i.dHeight;return{size:.05*a().width,lineFeed:{maxWidth:.5*a().width,lineNum:1},dx:.05*a().width,dy:i.dHeight+.25*n}}},{type:"text",text:"棒棒哒~",color:"#f1505c",serialNum:2,allInfoCallback:function(t){var e=t.drawArray,i=e.find((function(t){return"productImage"===t.id})),n=a().height-i.dHeight;return{size:.05*a().width,lineFeed:{maxWidth:.5*a().width,lineNum:1},dx:.05*a().width,dy:i.dHeight+.5*n}}},{type:"text",text:"无情哈拉少",serialNum:3,allInfoCallback:function(t){var e=t.drawArray,i=e.find((function(t){return"productImage"===t.id})),n=a().height-i.dHeight;return{size:.05*a().width,lineFeed:{maxWidth:.5*a().width,lineNum:1},dx:.05*a().width,dy:i.dHeight+.75*n}}},{type:"qrcode",text:"123456",serialNum:4,allInfoCallback:function(t){var e=t.drawArray,i=e.find((function(t){return"productImage"===t.id})),n=a().height-i.dHeight,r=.4*a().width,o=n,d=r>o?o:r,s=.9*d;return{size:s,dx:a().width-.95*d,dy:a().height-.95*d}}}]}});case 6:a=e.sent,r.default.log("海报生成成功, 时间:"+new Date+"， 临时路径: "+a.poster.tempFilePath),i.poster.finalPath=a.poster.tempFilePath,i.qrShow=!0,e.next=17;break;case 12:e.prev=12,e.t0=e["catch"](1),r.default.hideLoading(),r.default.showToast(JSON.stringify(e.t0)),console.log(JSON.stringify(e.t0));case 17:case"end":return e.stop()}}),e,null,[[1,12]])})))()},saveImage:function(){r.default.showToast("保存了")},share:function(){r.default.showToast("分享了")},hideQr:function(){this.qrShow=!1}}};e.default=d},"8dd8":function(t,e,i){"use strict";i.r(e);var a=i("28f3"),n=i("0dfd");for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);i("659e");var o,d=i("f0c5"),s=Object(d["a"])(n["default"],a["b"],a["c"],!1,null,"29b86a76",null,!1,a["a"],o);e["default"]=s.exports},c38d:function(t,e,i){var a=i("3941");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("cf548824",a,!0,{sourceMap:!1,shadowMode:!1})}}]);