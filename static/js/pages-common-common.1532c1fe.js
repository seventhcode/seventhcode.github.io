(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-common-common"],{"0e17":function(t,e,a){var i=a("c820");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("579bd5b6",i,!0,{sourceMap:!1,shadowMode:!1})},"2eb4":function(t,e,a){"use strict";a.r(e);var i=a("92a0"),n=a("be30");for(var o in n)"default"!==o&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("ac98");var r,s=a("f0c5"),d=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"ebb4d7aa",null,!1,i["a"],r);e["default"]=d.exports},"378a":function(t,e,a){"use strict";var i=a("ee27");a("7db0"),a("d3b7"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var n=i(a("c964")),o=i(a("bfd4")),r=a("c410"),s={data:function(){return{poster:{},qrShow:!1,canvasId:"default_PosterCanvasId"}},methods:{shareFc:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,o.default.log("准备生成:"+new Date),e.next=4,(0,r.getSharePoster)({_this:t,type:"testShareType",formData:{},posterCanvasId:t.canvasId,delayTimeScale:20,drawArray:function(t){var e=t.bgObj,a=(t.type,t.bgScale,.3*e.width),i=.045*e.width,n=.04*e.height;return new Promise((function(t,r){t([{type:"custom",setDraw:function(t){t.setFillStyle("black"),t.setGlobalAlpha(.3),t.fillRect(0,e.height-.2*e.height,e.width,.2*e.height),t.setGlobalAlpha(1)}},{type:"image",url:"https://wx.qlogo.cn/mmopen/vi_32/tQTicYLeq4icmGWyd95tXUAZt7ibMpWqAvt2Df8MykLtfJM2D1oN5rueJno94qkSZeFLDlkha2MxFWzWn0y8AdgIA/132",alpha:.3,dx:a,dy:e.height-.25*e.width,infoCallBack:function(t){var a=.2*e.width/t.height;return{circleSet:{x:t.width*a/2,y:.2*e.width/2,r:.2*e.width/2},dWidth:t.width*a,dHeight:.2*e.width}}},{type:"text",fontStyle:"italic",text:"取舍",size:i,color:"white",alpha:.5,textAlign:"left",textBaseline:"middle",infoCallBack:function(t){return o.default.log("index页面的text的infocallback ，textlength:"+t),{dx:e.width-t-i,dy:e.height-3*n}},serialNum:0,id:"tag1"},{type:"text",text:"取舍",fontWeight:"bold",size:i,color:"white",alpha:.75,textAlign:"left",textBaseline:"middle",serialNum:1,allInfoCallback:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.drawArray,a=e.find((function(t){return"tag1"===t.id}));return new Promise((function(t,e){setTimeout((function(){t({dx:a.dx,dy:a.dy+n})}),1)}))}},{type:"text",text:"取舍",size:i,color:"white",alpha:1,textAlign:"left",textBaseline:"middle",infoCallBack:function(t){return{dx:e.width-t-i,dy:e.height-n}}},{type:"qrcode",text:"你好，我是取舍",size:.2*e.width,dx:.05*e.width,dy:e.height-.25*e.width}])}))},setCanvasWH:function(e){var a=e.bgObj;e.type,e.bgScale;t.poster=a}});case 4:a=e.sent,o.default.log("海报生成成功, 时间:"+new Date+"， 临时路径: "+a.poster.tempFilePath),t.poster.finalPath=a.poster.tempFilePath,t.qrShow=!0,e.next=15;break;case 10:e.prev=10,e.t0=e["catch"](0),o.default.hideLoading(),o.default.showToast(JSON.stringify(e.t0)),console.log(JSON.stringify(e.t0));case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))()},saveImage:function(){o.default.showToast("保存了")},share:function(){o.default.showToast("分享了")},hideQr:function(){this.qrShow=!1}}};e.default=s},"92a0":function(t,e,a){"use strict";var i,n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"content"},[a("v-uni-text",{staticStyle:{"font-size":"29rpx",color:"#999"}},[t._v("QS-SharePoster.js中导出了一个方法--getSharePoster \\n\n\t\tgetSharePoster 为一个function，传入一个Object为配置参数对象, 最终return一个Promise对象 \\n\n\t\t配置参数对象参数如下: { \\n\n\t\t\tposterCanvasId: 'String 页面中canvas组件的canvasid属性', \\n\n\t\t\ttype: 'Any 自定义标识, 用于逻辑判断', \\n\n\t\t\tbgScale: 'Number 自定义缩放系数, 默认0', \\n\n\t\t\tformData: 'Any 若背景图为app.js获取， 则该参数将传至app.js中的获取背景图方法中用于访问接口携带参数', \\n\n\t\t\tbackgroundImage: 'String 背景图地址, 优先级大于app.js获取背景图', \\n\n\t\t\tbackground: 'Object: { height: '画布高度', width: '画布宽度', backgroundColor: '背景颜色' } 自定义背景, 优先级大于backgroundImage', \\n\n\t\t\treserve: 'Boolean 是否接着上次继续绘制', \\n\n\t\t\tdrawArray: 'Function|Array有序绘制序列', \\n\n\t\t\tsetCanvasWH: 'Function 用于设置当前页面所绑定画布的宽高, 一般必填', \\n\n\t\t\tsetCanvasToTempFilePath: 'Function | Object uni.canvasToTempFilePath 配置参数', \\n\n\t\t\tContext: 'canvasContext 画布实例', \\n\n\t\t\t_this: 'Vue Vue实例', \\n\n\t\t\tdelayTimeScale: 'Number 延时系数', \\n\n\t\t\tdrawDelayTime: 'Number draw方法延时时间值' \\n\n\t\t} \\n")]),a("v-uni-button",{attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.shareFc()}}},[t._v("生成海报")]),a("v-uni-view",{staticClass:"flex_row_c_c modalView",class:t.qrShow?"show":"",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideQr()}}},[a("v-uni-view",{staticClass:"flex_column"},[a("v-uni-view",{staticClass:"backgroundColor-white padding1vh border_radius_10px"},[a("v-uni-image",{staticClass:"posterImage",attrs:{src:t.poster.finalPath||"",mode:"widthFix"}})],1),a("v-uni-view",{staticClass:"flex_row marginTop2vh"},[a("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){e.preventDefault(),e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.saveImage()}}},[t._v("保存图片")]),a("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){e.preventDefault(),e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.share()}}},[t._v("分享图片")])],1)],1)],1),a("v-uni-view",{staticClass:"hideCanvasView"},[a("v-uni-canvas",{staticClass:"hideCanvas",style:{width:(t.poster.width||10)+"px",height:(t.poster.height||10)+"px"},attrs:{"canvas-id":"default_PosterCanvasId"}})],1)],1)},o=[];a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}))},ac98:function(t,e,a){"use strict";var i=a("0e17"),n=a.n(i);n.a},be30:function(t,e,a){"use strict";a.r(e);var i=a("378a"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},c820:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".hideCanvasView[data-v-ebb4d7aa]{position:relative}.hideCanvas[data-v-ebb4d7aa]{position:fixed;top:%?-99999?%;left:%?-99999?%;z-index:-99999}.flex_row_c_c[data-v-ebb4d7aa]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.modalView[data-v-ebb4d7aa]{width:100%;height:100%;position:fixed;top:0;left:0;right:0;bottom:0;opacity:0;outline:0;-webkit-transform:scale(1.2);transform:scale(1.2);-webkit-perspective:%?2500?%;perspective:%?2500?%;background:rgba(0,0,0,.6);-webkit-transition:all .3s ease-in-out;transition:all .3s ease-in-out;pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:999}.modalView.show[data-v-ebb4d7aa]{opacity:1;-webkit-transform:scale(1);transform:scale(1);pointer-events:auto}.flex_column[data-v-ebb4d7aa]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.backgroundColor-white[data-v-ebb4d7aa]{background-color:#fff}.border_radius_10px[data-v-ebb4d7aa]{border-radius:10px}.padding1vh[data-v-ebb4d7aa]{padding:1vh}.posterImage[data-v-ebb4d7aa]{width:60vw}.flex_row[data-v-ebb4d7aa]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}.marginTop2vh[data-v-ebb4d7aa]{margin-top:2vh}",""]),t.exports=e}}]);